<?php

function GetTextFile(string $path)
{
  $myfile = fopen($path, "r");
  $data = fread($myfile, filesize($path));
  $data = utf8_encode($data);
  fclose($myfile);

  return $data;
}

?>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Game Boy Zero Guide</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <!-- Supreme font -->
  <link href="//db.onlinewebfonts.com/c/9ab8abd11c40ee5c8d1905f9c9cb9ac8?family=Futura" rel="stylesheet" type="text/css"/>
  <link rel="stylesheet" type="text/css" href="style.css" />
</head>
<body>

<!-- Navbar -->
<nav class="navbar navbar-light bg-warning">
  <a class="navbar-brand" href="#"><span id="logo">&#8548;&Xi;&real;&dollar;&#8305;&#xFF2F;&pi; 3</span></a>
  <div class="dropdown">
  <button class="btn btn-danger dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    Font Settings
  </button>
  <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton">
    <a class="dropdown-item font-settings" href="#" data-font="regular">Regular</a>
    <a class="dropdown-item font-settings" href="#" data-font="dyslexic">Dyslexic</a>
  </div>
</div>
</nav>

<div class="modal fade" id="fullscreenImageModal" tabindex="-1" role="dialog" aria-labelledby="fullscreenImageModal" aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-body p-0 m-0">
        <img class="col-12 p-0 m-0" id="thumbnail" src="" alt="">
      </div>
      <div class="modal-footer"><span class="col-12" id="alttext"></span></div>
    </div>
  </div>
</div>

<!-- "Body" -->
<div class="clearfix bg-light">

<div class="col-sm-3 mySec float-left">

<h4 class="my-3">Table of Content</h4>

<?php
# HÄR SKRIVER DU HUR MÅNGA SEKTIONER DU HAR
$count = 20;

for ($i=0; $i < $count; $i++):
  # GetData
  $title = GetTextFile("docs/text/$i.title.txt");
  // Write HTML below
?>

<a class="h6" href="#<?=str_replace(' ', '-', $title)?>">- <?=$title?></a>
<br>

<?php endfor;?>

</div>

<div class="container col-sm-9 float-right px-0 pb-5 bg-white" id="bbody">

<div id="top-image" class="w-100 m-0">&nbsp;</div>
<div class="col-12 p-5 text-justify"><?=GetTextFile('docs/text/intro.txt');?></div>

<?php

for ($i=0; $i < $count; $i++):
  # GetData
  $title = GetTextFile("docs/text/$i.title.txt");
  $text = GetTextFile("docs/text/$i.text.txt");
  $image = "docs/images/Section $i.jpg";
  $info = GetTextFile("docs/images/$i.info.txt");
  // Write HTML below
  if ($i > 0) {
    echo '<hr class="divider">';
  }
  ?>

<div class="clearfix my-1" id="<?=str_replace(' ', '-', $title)?>">


  <div class="col-12">
    <div class="float-right col-sm-6">
      <div class="m-1">
        <h2><?=$title?></h2>
        <p><?=$text?></p>
      </div>
    </div>
    <div class="card col-sm-6 p-0 float-left">
      <!-- img -->
      <img src="<?=$image?>" class="card-img img-fluid previewImage"  alt="<?=$info?>">
      <!-- img -->
      <div class="card-body py-2">
        <small class="card-text text-muted"><?=$info?></small>
      </div>
    </div>
  </div>
</div>
<?php endfor; ?>

</div>

</div>

<!-- Optional JavaScript -->
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
<script src="font.js"></script>
<script>
$('.previewImage').on('click', function(ev) {
    $('#thumbnail').attr('src', ev.target.src);
    $('#fullscreenImageModal').modal('show');
    $('#alttext').text($(ev.target).attr('alt'));
});
</script>
</body>
</html>
